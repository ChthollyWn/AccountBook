<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../css/add.css"/>
    <title>修改</title>
</head>
<body>
<div id="box">
    <script src="../js/vue.min.js"></script>
    <script src="../js/axios.min.js"></script>
    <form v-on:submit.prevent="doSubmit">


        <div>
            <label>收支类型</label>
            <select>
                <option v-for="a in data" v-bind:value="a.accounttype">{{a.accounttype}}</option>
            </select>
        </div>


        <div>
            <label>分类名</label>
            <select>
                <option v-for="b in type" v-bind:value="b.typeid">{{b.typename}}</option>
            </select>
        </div>


        <div>
            <label>金额</label>
            <input type="text" placeholder="请输入金额（元）" v-model="info.accountmoney">
        </div>


        <div>
            <label>备注</label>
            <input type="text" placeholder="" v-model="info.marktext">
        </div>


        <button type="submit" id="submit" class="btn btn-primary">提交</button>

    </form>
</div>

<script>
    var vm = new Vue({
        el: "#box",
        data: {
            info:{},
            data: [],
            type: []
        },
        mounted: function () {
            axios.get("/data/list").then(resp => this.acalist = resp.data);
            axios.get("/type/list").then(resp => this.clazzlist = resp.data);
            var id =location.href.split("=")[1];
            axios.get("/data/updata?id="+id).then(resp=>{
                console.log(resp.data);
                this.info=resp.data
            });
        },
        methods: {
            doSubmit: function () {
                axios.get("/data/update", {
                    params: this.info
                }).then(resp => {
                    if (resp.data == '1') {
                        alert('修改成功');
                        location.href = 'list.html';//返回到list页面
                    }
                })
            }
        }
    })

</script>

        </body>
    </html>